<!-- YL Host Registration (no secret) -->
<div id="yl-host-form" style="font-family: system-ui, -apple-system, Segoe UI, Roboto, 'Helvetica Neue', Arial, sans-serif;">
  <form id="hostForm" style="max-width:560px;margin:20px auto;padding:20px;border-radius:14px;background:#083b55;color:#fff;box-shadow:0 12px 28px rgba(0,0,0,.18)">
    <h2 style="margin:0 0 12px;font-weight:800;">Table Host Registration</h2>
    <p style="margin:0 0 16px;opacity:.9;">We’ll auto-assign you the first available table.</p>

    <label>First name<br>
      <input required name="firstName" type="text" autocomplete="given-name" style="width:100%;padding:12px;border-radius:10px;border:0;margin:6px 0 12px;">
    </label>
    <label>Last name<br>
      <input required name="lastName" type="text" autocomplete="family-name" style="width:100%;padding:12px;border-radius:10px;border:0;margin:6px 0 12px;">
    </label>
    <label>Email<br>
      <input required name="email" type="email" autocomplete="email" style="width:100%;padding:12px;border-radius:10px;border:0;margin:6px 0 12px;">
    </label>
    <label>Phone<br>
      <input required name="phone" type="tel" autocomplete="tel" placeholder="(###) ###-####" style="width:100%;padding:12px;border-radius:10px;border:0;margin:6px 0 18px;">
    </label>

    <button type="submit" style="background:#f8b735;color:#083b55;font-weight:800;border:0;border-radius:999px;padding:12px 18px;cursor:pointer;">Become a Host</button>
    <span id="hostStatus" style="margin-left:12px;"></span>
  </form>
</div>

<script>
(function(){
  const ENDPOINT = 'https://script.google.com/macros/s/AKfycbxb7PzfjkwwVT8E3aEpxMSVot3wNxPqQFk3n-4OVwz9oAASlNtrWR7DXx4ybs5y_FE_lA/exec'; // <-- paste the /exec URL

  function post(payload) {
    // form-encoded body avoids preflight, plays nice with Apps Script
    return fetch(ENDPOINT, {
      method: 'POST',
      headers: { 'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8' },
      body: 'payload=' + encodeURIComponent(JSON.stringify(payload))
    }).then(r => r.json());
  }

  document.getElementById('hostForm').addEventListener('submit', async (ev) => {
    ev.preventDefault();
    const f = new FormData(ev.target);
    const payload = {
      action: 'registerHost',
      firstName: f.get('firstName').trim(),
      lastName:  f.get('lastName').trim(),
      email:     f.get('email').trim(),
      phone:     f.get('phone').trim()
    };

    const status = document.getElementById('hostStatus');
    status.textContent = 'Submitting…';

    try {
      const res = await post(payload);
      if (!res.ok) throw new Error(res.error || 'Unknown error');
      status.textContent = `Success! Assigned to ${res.assignedTable}. Share that number with your guests.`;
      ev.target.reset();
    } catch (e) {
      status.textContent = 'Error: ' + e.message;
    }
  });
})();
</script>